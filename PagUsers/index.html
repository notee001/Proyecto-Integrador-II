<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conglomerados</title>
    <!-- Mapbox -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
    <!-- Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <!-- Vista de Conglomerados -->
    <div id="conglomeradosView" style="display: none;">
        <div class="container">
            <div id="userInfo" style="margin-bottom: 15px; font-weight: bold;"></div>

            <div class="header">
                <button id="logoutBtn">‚Ü™</button>
                <h3>Conglomerados</h3>
            </div>

            <pre id="output"></pre>
            <div id="loading" class="loading" style="display: none;">Cargando conglomerados...</div>
            <div class="grid" id="grid">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>
    </div>

    <!-- Vista de Registro -->
    <div id="registroView" style="display: none;">
        <div class="registro-container">
            <h1>Completar Registro</h1>
            <p class="info-text">Por favor completa tu perfil para continuar</p>
            
            <form id="registroForm">
                <!-- Roles M√∫ltiples -->
                <div class="form-group">
                    <label>Selecciona tus Roles:</label>
                    <div class="rol-checkboxes">
                        <label class="checkbox-label">
                            <input type="checkbox" class="rol-checkbox" value="Jefe de brigada" />
                            Jefe de brigada
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" class="rol-checkbox" value="Botanico" />
                            Bot√°nico
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" class="rol-checkbox" value="Tecnico auxiliar" />
                            T√©cnico auxiliar
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" class="rol-checkbox" value="Coinvestigador" />
                            Coinvestigador
                        </label>
                    </div>
                    <span class="error" id="errorRol"></span>
                </div>

                <!-- Ubicaci√≥n con Mapa -->
                <div class="form-group">
                    <label>Ubicaci√≥n (Latitud y Longitud):</label>
                    <button type="button" class="map-button" id="btnObtenerUbicacion">üìç Obtener ubicaci√≥n actual</button>
                    <div id="map"></div>
                    <div class="map-info">
                        Haz clic en el mapa para seleccionar una ubicaci√≥n o usa el bot√≥n de arriba
                    </div>
                    <div class="ubicacion-section">
                        <div>
                            <label for="latitud">Latitud:</label>
                            <input type="number" id="latitud" name="latitud" step="0.000001" placeholder="Latitud" required />
                            <span class="error" id="errorLatitud"></span>
                        </div>
                        <div>
                            <label for="longitud">Longitud:</label>
                            <input type="number" id="longitud" name="longitud" step="0.000001" placeholder="Longitud" required />
                            <span class="error" id="errorLongitud"></span>
                        </div>
                    </div>
                </div>

                <!-- Botones -->
                <div class="button-group">
                    <button type="submit">Registrarse</button>
                    <button type="button" id="btnLogout" class="btn-logout">Cerrar Sesi√≥n</button>
                </div>

                <span class="error" id="errorGeneral"></span>
                <span class="success" id="successMessage"></span>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="utils.js"></script>
    <script src="registro.js"></script>
    <script src="app.js"></script>
</body>
</html>
